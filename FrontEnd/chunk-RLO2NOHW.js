import{a as x}from"./chunk-XR2PVCUE.js";import{a as C}from"./chunk-6IEWE3OU.js";import{a as L}from"./chunk-3R6HD5RM.js";import{a as $}from"./chunk-JO7ZMDM2.js";import{a as w}from"./chunk-JBDWF4AB.js";import"./chunk-CJO6YW5P.js";import{a as H}from"./chunk-ZWBJNS7X.js";import"./chunk-7YBFULQ5.js";import{g as N,i as y}from"./chunk-QVE5MGEQ.js";import{C as P,F as B,J as S,b as I,i as v,l as k,p as R,q as z,u as O,x as V,y as j}from"./chunk-4PVPKBBG.js";import{a as T,b as F,c as M}from"./chunk-YKJB7XET.js";import"./chunk-FUOI65R5.js";import"./chunk-2YYUDHRL.js";import{Fb as c,Hb as E,Ka as a,La as g,Pb as h,bb as s,fe as b,ga as m,ka as f,ke as A,mb as i,nb as l,ob as u,q as _,vb as p}from"./chunk-ODJKW74N.js";import{a as D}from"./chunk-NEB6MB4Y.js";var G=(()=>{let r=class r{constructor(){this.fb=m(P),this.dialogRef=m(T),this.generoService=m(x),this.fuseService=m(N),this.estadosDatosService=m(w),this.toasService=m($),this._matData=m(F),this.swalService=m(H)}ngOnInit(){this.createForm();let t=this._matData;if(t.edit){let e=t.data;this.form.patchValue(e)}}onSave(){if(this.form.valid)if(this._matData.edit){let t=this.form.getRawValue();this.fuseService.open(D({},y)).afterClosed().subscribe(o=>{o==="confirmed"?this.generoService.putGeneros(t).subscribe(n=>{this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro actualizado con exito!",timer:4e3}),this.closeDialog()},n=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al actualizar el registro!",timer:4e3})}):this.closeDialog()})}else{let t=this.form.getRawValue();this.fuseService.open(D({},y)).afterClosed().subscribe(o=>{o==="confirmed"?this.generoService.postGeneros(t).subscribe(n=>{console.log(n),this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro Creado o Actualizado con Exito.",timer:4e3}),this.closeDialog()},n=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al crear el registro!",timer:4e3})}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],nombre:[""]})}closeDialog(){this.dialogRef.close()}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=f({type:r,selectors:[["app-form-generos"]],standalone:!0,features:[h],decls:16,vars:5,consts:[[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],["floatLabel","always",1,"w-full"],["matInput","","placeholder","Nombre",3,"formControlName"],[1,"flex","flex-wrap","justify-end","gap-2.5"],["mat-flat-button","",1,"sm:w-auto","w-full","sm:mt-6","bg-credigray-100","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],["mat-flat-button","",1,"sm:w-auto","w-full","sm:mt-6","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),c(3),l(),i(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),c(7,"Nombre"),l(),u(8,"input",5),l(),i(9,"div",6)(10,"button",7),p("click",function(){return o.closeDialog()}),i(11,"span"),c(12," Cancelar "),l()(),i(13,"button",8),p("click",function(){return o.onSave()}),i(14,"span"),c(15," Guardar "),l()()()()()()),e&2&&(a(3),E(" ",o._matData.edit?"Actualizar g\xE9nero":"Agregar g\xE9nero"," "),a(),s("formGroup",o.form),a(4),s("formControlName","nombre"),a(2),s("color","primary"),a(3),s("color","primary"))},dependencies:[b,v,S,I,B,O,k,R,z,V,j],styles:[".custom-dialog-container{width:100%}@media (min-width: 1280px){  .custom-dialog-container{width:25%}}"]});let d=r;return d})();var q=(()=>{let r=class r{constructor(t,e,o){this._matDialog=t,this.estadoDatosService=e,this.generoService=o,this.searchTerm="",this.data=[],this.columns=["Estado","Nombre"],this.columnPropertyMap={Estado:"estado",Nombre:"nombre"},this.buttons=[{label:"Edici\xF3n",icon:"edit",action:n=>{console.log("Editing",n),this.selectedData=n,this.onEdit()}}]}onNew(){this._matDialog.open(G,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",disableClose:!0,panelClass:"custom-dialog-container"})}onEdit(){this._matDialog.open(G,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",disableClose:!0,panelClass:"custom-dialog-container"})}getGeneros(){this.subcription$=this.generoService.getGeneros().pipe(_(t=>(t.data.forEach(e=>{e.estado?e.estado=C.ACTIVO:e.estado=C.INACTIVO}),t))).subscribe(t=>{this.data=t.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(e=>{e&&this.getGeneros()})}onSearch(t){let e=t.target;this.searchTerm=e.value.trim().toLowerCase()}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getGeneros(),this.listenGrid()}};r.\u0275fac=function(e){return new(e||r)(g(M),g(w),g(x))},r.\u0275cmp=f({type:r,selectors:[["app-grid-generos"]],standalone:!0,features:[h],decls:15,vars:12,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"input","autocomplete","placeholder"],["mat-flat-button","",1,"mt-2","w-full","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold","sm:ml-4","sm:mt-0","sm:w-auto",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons","searchTerm"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),c(3,"G\xE9neros"),l(),i(4,"div",3)(5,"mat-form-field",4),u(6,"mat-icon",5),i(7,"input",6),p("input",function(J){return o.onSearch(J)}),l()(),i(8,"button",7),p("click",function(){return o.onNew()}),u(9,"mat-icon",8),i(10,"span",9),c(11,"Agregar"),l()()()(),i(12,"div",10)(13,"div",11),u(14,"app-custom-table",12),l()()()),e&2&&(a(5),s("subscriptSizing","dynamic"),a(),s("svgIcon","heroicons_solid:magnifying-glass"),a(),s("autocomplete","off")("placeholder","Buscar"),a(),s("color","primary"),a(),s("svgIcon","heroicons_outline:plus"),a(5),s("columns",o.columns)("displayedColumns",o.columns)("columnPropertyMap",o.columnPropertyMap)("data",o.data)("buttons",o.buttons)("searchTerm",o.searchTerm))},dependencies:[L,b,v,A,S]});let d=r;return d})();var ye=[{path:"",component:q}];export{ye as default};
