import{a as he}from"./chunk-WOCZ47SM.js";import{a as Ce}from"./chunk-HVQGIO75.js";import{a as ce,b as de,c as fe}from"./chunk-73HPXQ4R.js";import{a as ue}from"./chunk-LUBH4OK2.js";import{a as pe}from"./chunk-H2GGAK7L.js";import{a as se}from"./chunk-QF5DML3C.js";import"./chunk-P63XEOLN.js";import{C as re,F as ae,J as me,b as K,e as Q,i as U,l as Y,n as _,p as Z,q as ee,s as te,u as oe,x as ie,y as ne}from"./chunk-5EZKXU2X.js";import{h as J}from"./chunk-GQMDELPL.js";import{a as le}from"./chunk-VQY6X2PJ.js";import"./chunk-QTY5OGKD.js";import{Q as $,R as j,ba as H,ga as W,la as X}from"./chunk-TS7YPRLN.js";import"./chunk-YMFBC3ZU.js";import"./chunk-5TY7V3W7.js";import"./chunk-3D4SSKQC.js";import{Ac as G,Cb as y,Dc as L,Eb as P,Ec as w,Gc as q,Hc as z,Lb as x,Mb as s,Nb as V,Qa as e,Vb as N,Wb as R,_ as F,cc as A,dc as O,gb as C,ha as u,ib as o,ma as k,pb as M,tb as n,ub as i,vb as h,wa as v,wb as I,xa as g,xb as T,zb as D,zc as B}from"./chunk-IEDNLM77.js";import{a as S,d as E}from"./chunk-NEB6MB4Y.js";function ye(t,r){if(t&1&&(n(0,"mat-option",21),s(1),i()),t&2){let m=r.$implicit;o("value",m.id),e(),V(m.nombre)}}function _e(t,r){if(t&1&&(I(0),C(1,ye,2,2,"mat-option",20),T()),t&2){let m=r.ngIf;e(),o("ngForOf",m.data)}}function xe(t,r){if(t&1&&(n(0,"div",19)(1,"div",22),h(2,"app-custom-table",23),i()()),t&2){let m=P();e(2),o("columns",m.columns)("displayedColumns",m.columns)("columnPropertyMap",m.columnPropertyMap)("data",m.data)("searchTerm",m.searchTerm)}}function we(t,r){t&1&&(n(0,"div",24)(1,"div",25)(2,"fuse-alert",26)(3,"span",27),s(4,"Informaci\xF3n"),i(),s(5," No hay informaci\xF3n hasta el momento. "),i()()()),t&2&&(e(2),o("type","info")("appearance","outline"))}function be(t,r){t&1&&C(0,we,6,2,"ng-template")}var ve=(()=>{let r=class r{constructor(){this.searchTerm="",this.fb=u(re),this.reportesService=u(he),this.datePipe=u(w),this.estados=new te([""]),this.detalleConsumoService=u(Ce),this.detalleConsumo$=this.detalleConsumoService.getDetalleConsumo().pipe(F(l=>{let a=l.data;a&&this.form.get("idEstadoCredito").setValue(a[0].id)})),this.data=[],this.columns=["Empresa","N factura / Comprobante","Valor pendiente"],this.columnPropertyMap={Empresa:"nombreSubEmpresa","N factura / Comprobante":"numeroFactura","Valor pendiente":"valorPendiente"}}onSearch(l){let a=l.target;this.searchTerm=a.value.trim().toLowerCase()}onSelect(l){let a=l.value}createForm(){this.form=this.fb.group({idEstadoCredito:["",_.required],fechaInicio:["",_.required],fechaFinal:["",_.required]})}ngOnInit(){this.createForm()}onConsultar(){if(this.form.valid){let l=this.form.getRawValue(),{fechaInicio:a,fechaFinal:p}=l,c=E(l,["fechaInicio","fechaFinal"]),d=this.datePipe.transform(a,"yyyy-MM-dd"),f=this.datePipe.transform(p,"yyyy-MM-dd"),ge=S({fechaInicio:d,fechaFinal:f},c);this.reportesService.getReporteConsumo(ge).subscribe(b=>{b.data?this.data=b.data:this.data=[]})}}};r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=k({type:r,selectors:[["app-reporte-consumos"]],standalone:!0,features:[N([{provide:j,useClass:ue},{provide:$,useValue:"en-GB"},w,z,q]),R],decls:38,vars:18,consts:[["inicioPicker",""],["finalPicker",""],["cdkScrollable","",1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"input","autocomplete","placeholder"],[1,"px-6","border-b","mt-6","w-full","shrink-0","sm:mt-0","sm:space-x-2","lg:w-full"],[1,"flex","flex-col","sm:flex-row","gap-2.5",3,"formGroup"],[1,"w-full","sm:w-1/2"],[3,"selectionChange","formControlName"],[4,"ngIf"],["floatLabel","always",1,"w-full","sm:w-1/2"],["matInput","","placeholder","dd/mm/yyyy",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],["mat-flat-button","",1,"sm:w-1/6","w-full","sm:mt-6","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],["mat-flat-button","",1,"sm:sm:w-1/6","w-full","sm:mt-6","bg-green-700","rounded-lg","transition","duration-200","text-white","font-semibold",3,"color"],[1,"flex","flex-auto","overflow-hidden"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","searchTerm"],[1,"inset-0","min-w-0","overflow-auto","print:overflow-visible"],[1,"inline-block","p-4","sm:p-2","print:p-0","w-full"],[3,"type","appearance"],["fuseAlertTitle",""]],template:function(a,p){if(a&1){let c=D();n(0,"div",2)(1,"div",3)(2,"div",4),s(3,"Reporte de Consumos"),i(),n(4,"div",5)(5,"mat-form-field",6),h(6,"mat-icon",7),n(7,"input",8),y("input",function(f){return v(c),g(p.onSearch(f))}),i()()()(),n(8,"div",9)(9,"form",10)(10,"mat-form-field",11)(11,"mat-label"),s(12,"Estados"),i(),n(13,"mat-select",12),y("selectionChange",function(f){return v(c),g(p.onSelect(f))}),C(14,_e,2,1,"ng-container",13),A(15,"async"),i()(),n(16,"mat-form-field",14)(17,"mat-label"),s(18,"Fecha de inicio"),i(),h(19,"input",15)(20,"mat-datepicker-toggle",16)(21,"mat-datepicker",null,0),i(),n(23,"mat-form-field",14)(24,"mat-label"),s(25,"Fecha fin"),i(),h(26,"input",15)(27,"mat-datepicker-toggle",16)(28,"mat-datepicker",null,1),i(),n(30,"button",17),y("click",function(){return v(c),g(p.onConsultar())}),n(31,"span"),s(32," Consultar "),i()(),n(33,"button",18)(34,"span"),s(35," Exportar "),i()()()(),C(36,xe,3,5,"div",19)(37,be,1,0),i()}if(a&2){let c=x(22),d=x(29);e(5),o("subscriptSizing","dynamic"),e(),o("svgIcon","heroicons_solid:magnifying-glass"),e(),o("autocomplete","off")("placeholder","Buscar"),e(2),o("formGroup",p.form),e(4),o("formControlName","idEstadoCredito"),e(),o("ngIf",O(15,16,p.detalleConsumo$)),e(5),o("matDatepicker",c)("formControlName","fechaInicio"),e(),o("for",c),e(6),o("matDatepicker",d)("formControlName","fechaFinal"),e(),o("for",d),e(3),o("color","primary"),e(3),o("color","primary"),e(3),M(p.data.length>0?36:37)}},dependencies:[L,pe,U,X,me,K,H,se,B,G,le,ae,oe,Y,Z,ee,ie,ne,ce,de,fe,Q,J,W]});let t=r;return t})();var Ke=[{path:"",component:ve}];export{Ke as default};
