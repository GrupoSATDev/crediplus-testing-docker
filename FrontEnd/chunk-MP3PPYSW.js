import{b as se}from"./chunk-O3C2OI5D.js";import{a as oe,b as re}from"./chunk-EBWT3Z7R.js";import{D as $,E as ee,F as te,J as ie,K as ne,b as T,c as P,e as j,i as q,j as D,l as W,n as w,p as Y,q as J,u as K,x as X,y as Z}from"./chunk-5EZKXU2X.js";import{b as O}from"./chunk-Y2OEOJCY.js";import{b as B,d as N}from"./chunk-UEKZXHJT.js";import{a as ae}from"./chunk-VQY6X2PJ.js";import"./chunk-QTY5OGKD.js";import{ga as L,ia as U,ja as G,la as z,ma as Q}from"./chunk-TS7YPRLN.js";import{a as H}from"./chunk-YMFBC3ZU.js";import"./chunk-5TY7V3W7.js";import"./chunk-ZVLDBLLW.js";import{Cb as v,Eb as M,Ib as A,Jb as E,Kb as k,Lb as _,Mb as s,Ob as R,Qa as a,Ra as u,Wb as V,gb as f,ib as c,ma as b,pb as p,tb as i,ub as t,vb as d,wa as g,xa as h,ya as S,za as C,zb as F}from"./chunk-IEDNLM77.js";import"./chunk-NEB6MB4Y.js";var le={"Super Admin":"/pages/dashboard/resumen-ejecutivo",Analista:"/pages/gestion-creditos/desembolsos",Aliado:"/pages/gestion-creditos/detalle-consumo",Desembolso:"/pages/gestion-creditos/desembolsos",Auditor:"/pages/dashboard/resumen-ejecutivo"};var de=["signInNgForm"];function ce(e,o){if(e&1&&(i(0,"fuse-alert",8),s(1),t()),e&2){let x=M();c("appearance","outline")("showIcon",!1)("type",x.alert.type)("@shake",x.alert.type==="error"),a(),R(" ",x.alert.message," ")}}function pe(e,o){e&1&&(i(0,"mat-error"),s(1," El correo es requirido "),t())}function ue(e,o){e&1&&(i(0,"mat-error"),s(1," El correo es invalido! "),t())}function fe(e,o){e&1&&d(0,"mat-icon",14),e&2&&c("svgIcon","heroicons_solid:eye")}function ge(e,o){e&1&&d(0,"mat-icon",14),e&2&&c("svgIcon","heroicons_solid:eye-slash")}function he(e,o){e&1&&(i(0,"span"),s(1," Inciar sesi\xF3n "),t())}function ve(e,o){e&1&&d(0,"mat-progress-spinner",16),e&2&&c("diameter",24)("mode","indeterminate")}var me=(()=>{let o=class o{constructor(l,r,n,m){this._activatedRoute=l,this._authService=r,this._formBuilder=n,this._router=m,this.showInstallButton=!1,this.alert={type:"success",message:""},this.showAlert=!1}ngOnInit(){this.signInForm=this._formBuilder.group({correo:["",[w.required,w.email]],contrasena:["",w.required]}),window.addEventListener("beforeinstallprompt",l=>{l.preventDefault(),this.deferredPrompt=l,this.showInstallButton=!0})}installApp(){this.deferredPrompt&&(this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then(l=>{l.outcome==="accepted"?console.log("PWA instalada"):console.log("Instalaci\xF3n rechazada"),this.deferredPrompt=null}))}signIn(){if(this.signInForm.invalid)return;this.signInForm.disable(),this.showAlert=!1;let l=this.signInForm.getRawValue();this._authService.signIn(l).subscribe(()=>{let r=this._authService.getRole(),n=le[r]||this._activatedRoute.snapshot.queryParamMap.get("redirectURL")||"/signed-in-redirect";this._router.navigateByUrl(n)},r=>{this.signInForm.enable(),this.alert={type:"error",message:r.error.errorMenssages[0]},this.showAlert=!0})}};o.\u0275fac=function(r){return new(r||o)(u(B),u(O),u($),u(N))},o.\u0275cmp=b({type:o,selectors:[["auth-sign-in"]],viewQuery:function(r,n){if(r&1&&A(de,5),r&2){let m;E(m=k())&&(n.signInNgForm=m.first)}},standalone:!0,features:[V],decls:47,vars:11,consts:[["signInNgForm","ngForm"],["passwordField",""],[1,"flex","min-w-0","flex-auto","flex-col","items-center","sm:flex-row","sm:justify-center","md:items-start","md:justify-start"],[1,"w-full","px-4","py-8","sm:bg-card","sm:w-auto","sm:rounded-2xl","sm:p-12","sm:shadow","md:flex","md:h-full","md:w-1/2","md:items-center","md:justify-end","md:rounded-none","md:p-16","md:shadow-none"],[1,"mx-auto","w-full","max-w-80","sm:mx-0","sm:w-80"],[1,"w-4/5"],["src","images/logo/logo-azul.svg"],[1,"mt-8","text-4xl","font-extrabold","leading-tight","tracking-tight"],[1,"mt-8",3,"appearance","showIcon","type"],[1,"mt-8",3,"formGroup"],[1,"w-full"],["id","correo","matInput","",3,"formControlName"],["id","contrasena","matInput","","type","password",3,"formControlName"],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","w-full","bg-crediblue-50","text-white","font-semibold","rounded-lg",3,"click","disabled"],[3,"diameter","mode"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","w-full","bg-crediorange-100","text-white","font-semibold","rounded-lg",3,"click"],[1,"relative","hidden","h-full","w-1/2","flex-auto","items-center","justify-center","overflow-hidden","bg-gray-800","p-16","dark:border-l","md:flex","lg:px-28"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["viewBox","0 0 220 192","width","220","height","192","fill","none",1,"absolute","-top-16","-right-16","text-gray-700"],["id","837c3e70-6c3a-44e6-8854-cc48c737b659","x","0","y","0","width","20","height","20","patternUnits","userSpaceOnUse"],["x","0","y","0","width","4","height","4","fill","currentColor"],["width","220","height","192","fill","url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"],[1,"relative","z-10","w-full","max-w-2xl"],[1,"text-7xl","font-bold","leading-none","text-gray-100"],[1,"mt-6","text-lg","leading-6","tracking-tight","text-gray-400"]],template:function(r,n){if(r&1){let m=F();i(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),d(4,"img",6),t(),i(5,"div",7),s(6," Inicio de sesi\xF3n "),t(),f(7,ce,2,5,"fuse-alert",8),i(8,"form",9,0)(10,"mat-form-field",10)(11,"mat-label"),s(12,"Correo electronico"),t(),d(13,"input",11),f(14,pe,2,0,"mat-error")(15,ue,2,0,"mat-error"),t(),i(16,"mat-form-field",10)(17,"mat-label"),s(18,"Contrase\xF1a"),t(),d(19,"input",12,1),i(21,"button",13),v("click",function(){g(m);let I=_(20);return h(I.type==="password"?I.type="text":I.type="password")}),f(22,fe,1,1,"mat-icon",14)(23,ge,1,1,"mat-icon",14),t(),i(24,"mat-error"),s(25," Contrase\xF1a es invalida! "),t()(),i(26,"button",15),v("click",function(){return g(m),h(n.signIn())}),f(27,he,2,0,"span")(28,ve,1,2,"mat-progress-spinner",16),t()(),i(29,"button",17),v("click",function(){return g(m),h(n.installApp())}),s(30," Instalar App "),t()()(),i(31,"div",18),S(),i(32,"svg",19)(33,"g",20),d(34,"circle",21)(35,"circle",22),t()(),i(36,"svg",23)(37,"defs")(38,"pattern",24),d(39,"rect",25),t()(),d(40,"rect",26),t(),C(),i(41,"div",27)(42,"div",28)(43,"div"),s(44,"Bienvenido a CrediPlus"),t()(),i(45,"div",29),s(46," Plataforma para gestionar pr\xE9stamos a colaboradores de manera eficiente y segura. Inicia Sesi\xF3n y accede las opciones que tenemos para ti. "),t()()()()}if(r&2){let m=_(20);a(7),p(n.showAlert?7:-1),a(),c("formGroup",n.signInForm),a(5),c("formControlName","correo"),a(),p(n.signInForm.get("correo").hasError("required")?14:-1),a(),p(n.signInForm.get("correo").hasError("correo")?15:-1),a(4),c("formControlName","contrasena"),a(3),p(m.type==="password"?22:-1),a(),p(m.type==="text"?23:-1),a(3),c("disabled",n.signInForm.disabled),a(),p(n.signInForm.disabled?-1:27),a(),p(n.signInForm.disabled?28:-1)}},dependencies:[ae,ee,K,W,Y,J,te,X,Z,D,q,T,P,j,ne,ie,G,L,U,Q,z,se,re,oe],encapsulation:2,data:{animation:H}});let e=o;return e})();var Le=[{path:"",component:me}];export{Le as default};
