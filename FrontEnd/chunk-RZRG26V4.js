import{a as Ce}from"./chunk-3MX4MELF.js";import{a as he}from"./chunk-NE46MTSM.js";import{a as ce,b as de,c as fe}from"./chunk-LZ3ZEVTF.js";import{a as ue}from"./chunk-DTORAJAR.js";import{a as pe}from"./chunk-3R6HD5RM.js";import{a as se}from"./chunk-CJO6YW5P.js";import"./chunk-7YBFULQ5.js";import{C as re,F as ae,J as me,b as K,e as Q,i as U,l as Y,n as x,p as Z,q as ee,s as te,u as oe,x as ie,y as ne}from"./chunk-4PVPKBBG.js";import{h as J}from"./chunk-FUOI65R5.js";import{a as le}from"./chunk-73F67TFK.js";import"./chunk-XTYNXB3F.js";import"./chunk-2YYUDHRL.js";import{$a as g,Ad as j,Eb as w,Fb as s,Gb as V,Ka as e,Md as H,Ob as N,Pb as R,Xb as A,Yb as O,Z as F,bb as t,fe as W,ga as u,ib as M,ka as k,ke as X,mb as n,nb as o,ob as h,pb as I,qb as D,qc as B,rc as G,sb as P,ua as C,uc as L,va as v,vb as y,vc as b,xb as T,xc as q,yc as z,zd as $}from"./chunk-ODJKW74N.js";import{a as S,d as E}from"./chunk-NEB6MB4Y.js";function ye(i,r){if(i&1&&(n(0,"mat-option",22),s(1),o()),i&2){let m=r.$implicit;t("value",m.id),e(),V(m.nombre)}}function xe(i,r){if(i&1&&(I(0),g(1,ye,2,2,"mat-option",21),D()),i&2){let m=r.ngIf;e(),t("ngForOf",m.data)}}function we(i,r){if(i&1&&(n(0,"div",19)(1,"div",23),h(2,"app-custom-table",24),o()()),i&2){let m=T();e(2),t("columns",m.columns)("displayedColumns",m.columns)("columnPropertyMap",m.columnPropertyMap)("data",m.data)("searchTerm",m.searchTerm)}}function be(i,r){i&1&&(n(0,"div",20)(1,"div",25)(2,"fuse-alert",26)(3,"span",27),s(4,"Informaci\xF3n"),o(),s(5," No hay informaci\xF3n hasta el momento. "),o()()()),i&2&&(e(2),t("type","info")("appearance","outline"))}var ve=(()=>{let r=class r{constructor(){this.searchTerm="",this.fb=u(re),this.reportesService=u(Ce),this.datePipe=u(b),this.estados=new te([""]),this.detalleConsumoService=u(he),this.detalleConsumo$=this.detalleConsumoService.getDetalleConsumo().pipe(F(l=>{let a=l.data;a&&this.form.get("idEstadoCredito").setValue(a[0].id)})),this.data=[],this.columns=["Empresa","N factura / Comprobante","Valor pendiente"],this.columnPropertyMap={Empresa:"nombreSubEmpresa","N factura / Comprobante":"numeroFactura","Valor pendiente":"valorPendiente"}}onSearch(l){let a=l.target;this.searchTerm=a.value.trim().toLowerCase()}onSelect(l){let a=l.value}createForm(){this.form=this.fb.group({idEstadoCredito:["",x.required],fechaInicio:["",x.required],fechaFinal:["",x.required]})}ngOnInit(){this.createForm()}onConsultar(){if(this.form.valid){let l=this.form.getRawValue(),{fechaInicio:a,fechaFinal:p}=l,c=E(l,["fechaInicio","fechaFinal"]),d=this.datePipe.transform(a,"yyyy-MM-dd"),f=this.datePipe.transform(p,"yyyy-MM-dd"),ge=S({fechaInicio:d,fechaFinal:f},c);this.reportesService.getReporteConsumo(ge).subscribe(_=>{_.data?this.data=_.data:this.data=[]})}}};r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=k({type:r,selectors:[["app-reporte-consumos"]],standalone:!0,features:[N([{provide:j,useClass:ue},{provide:$,useValue:"en-GB"},b,z,q]),R],decls:38,vars:18,consts:[["inicioPicker",""],["finalPicker",""],["cdkScrollable","",1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"input","autocomplete","placeholder"],[1,"px-6","border-b","mt-6","w-full","shrink-0","sm:mt-0","sm:space-x-2","lg:w-full"],[1,"flex","flex-col","sm:flex-row","gap-2.5",3,"formGroup"],[1,"w-full","sm:w-1/2"],[3,"selectionChange","formControlName"],[4,"ngIf"],["floatLabel","always",1,"w-full","sm:w-1/2"],["matInput","","placeholder","dd/mm/yyyy",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],["mat-flat-button","",1,"sm:w-1/6","w-full","sm:mt-6","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],["mat-flat-button","",1,"sm:sm:w-1/6","w-full","sm:mt-6","bg-green-700","rounded-lg","transition","duration-200","text-white","font-semibold",3,"color"],[1,"flex","flex-auto","overflow-hidden"],[1,"inset-0","min-w-0","overflow-auto","print:overflow-visible"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","searchTerm"],[1,"inline-block","p-4","sm:p-2","print:p-0","w-full"],[3,"type","appearance"],["fuseAlertTitle",""]],template:function(a,p){if(a&1){let c=P();n(0,"div",2)(1,"div",3)(2,"div",4),s(3,"Reporte de Consumos"),o(),n(4,"div",5)(5,"mat-form-field",6),h(6,"mat-icon",7),n(7,"input",8),y("input",function(f){return C(c),v(p.onSearch(f))}),o()()()(),n(8,"div",9)(9,"form",10)(10,"mat-form-field",11)(11,"mat-label"),s(12,"Estados"),o(),n(13,"mat-select",12),y("selectionChange",function(f){return C(c),v(p.onSelect(f))}),g(14,xe,2,1,"ng-container",13),A(15,"async"),o()(),n(16,"mat-form-field",14)(17,"mat-label"),s(18,"Fecha de inicio"),o(),h(19,"input",15)(20,"mat-datepicker-toggle",16)(21,"mat-datepicker",null,0),o(),n(23,"mat-form-field",14)(24,"mat-label"),s(25,"Fecha fin"),o(),h(26,"input",15)(27,"mat-datepicker-toggle",16)(28,"mat-datepicker",null,1),o(),n(30,"button",17),y("click",function(){return C(c),v(p.onConsultar())}),n(31,"span"),s(32," Consultar "),o()(),n(33,"button",18)(34,"span"),s(35," Exportar "),o()()()(),g(36,we,3,5,"div",19)(37,be,6,2,"div",20),o()}if(a&2){let c=w(22),d=w(29);e(5),t("subscriptSizing","dynamic"),e(),t("svgIcon","heroicons_solid:magnifying-glass"),e(),t("autocomplete","off")("placeholder","Buscar"),e(2),t("formGroup",p.form),e(4),t("formControlName","idEstadoCredito"),e(),t("ngIf",O(15,16,p.detalleConsumo$)),e(5),t("matDatepicker",c)("formControlName","fechaInicio"),e(),t("for",c),e(6),t("matDatepicker",d)("formControlName","fechaFinal"),e(),t("for",d),e(3),t("color","primary"),e(3),t("color","primary"),e(3),M(p.data.length>0?36:37)}},dependencies:[L,pe,U,X,me,K,H,se,B,G,le,ae,oe,Y,Z,ee,ie,ne,ce,de,fe,Q,J,W]});let i=r;return i})();var Je=[{path:"",component:ve}];export{Je as default};
