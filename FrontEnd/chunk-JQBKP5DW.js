import{b as ae}from"./chunk-THBZFYKH.js";import{a as se,b as le}from"./chunk-CLA6M7LY.js";import{D as te,E as ie,F as ne,J as oe,K as re,b as j,c as L,e as q,i as D,j as U,l as J,n as v,p as K,q as X,u as Z,x as $,y as ee}from"./chunk-4PVPKBBG.js";import{c as W}from"./chunk-JYBFWQMA.js";import"./chunk-KAEQCOKJ.js";import{b as N,d as T,e as P}from"./chunk-C66ODKJP.js";import"./chunk-YKJB7XET.js";import"./chunk-FUOI65R5.js";import{a as me}from"./chunk-73F67TFK.js";import{b as Y}from"./chunk-XTYNXB3F.js";import"./chunk-2YYUDHRL.js";import{$a as f,Bb as A,Cb as E,Db as k,Eb as I,Fb as s,Hb as R,Ka as o,La as u,Pb as V,Qb as B,bb as d,fe as G,he as z,ib as p,ie as Q,ka as b,ke as O,le as H,mb as i,nb as t,ob as c,sb as F,ua as g,va as h,vb as w,wa as S,xa as C,xb as M}from"./chunk-ODJKW74N.js";import"./chunk-NEB6MB4Y.js";var de={"Super Admin":"/pages/gestion-creditos/solicitudes",Analista:"/pages/gestion-creditos/desembolsos",Aliado:"/pages/gestion-creditos/detalle-consumo",Desembolso:"/pages/gestion-creditos/desembolsos",Auditor:"/pages/gestion-creditos/solicitudes"};var pe=["signInNgForm"],ue=()=>["/forgot-password"];function fe(e,r){if(e&1&&(i(0,"fuse-alert",8),s(1),t()),e&2){let x=M();d("appearance","outline")("showIcon",!1)("type",x.alert.type)("@shake",x.alert.type==="error"),o(),R(" ",x.alert.message," ")}}function ge(e,r){e&1&&(i(0,"mat-error"),s(1," El correo es requirido "),t())}function he(e,r){e&1&&(i(0,"mat-error"),s(1," El correo es invalido! "),t())}function we(e,r){e&1&&c(0,"mat-icon",14),e&2&&d("svgIcon","heroicons_solid:eye")}function ve(e,r){e&1&&c(0,"mat-icon",14),e&2&&d("svgIcon","heroicons_solid:eye-slash")}function xe(e,r){e&1&&(i(0,"span"),s(1," Inciar sesi\xF3n "),t())}function ye(e,r){e&1&&c(0,"mat-progress-spinner",18),e&2&&d("diameter",24)("mode","indeterminate")}var ce=(()=>{let r=class r{constructor(l,a,n,m){this._activatedRoute=l,this._authService=a,this._formBuilder=n,this._router=m,this.showInstallButton=!1,this.alert={type:"success",message:""},this.showAlert=!1}ngOnInit(){this.signInForm=this._formBuilder.group({correo:["",[v.required,v.email]],contrasena:["",v.required]}),window.addEventListener("beforeinstallprompt",l=>{l.preventDefault(),this.deferredPrompt=l,this.showInstallButton=!0})}installApp(){this.deferredPrompt&&(this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then(l=>{l.outcome==="accepted"?console.log("PWA instalada"):console.log("Instalaci\xF3n rechazada"),this.deferredPrompt=null}))}signIn(){if(this.signInForm.invalid)return;this.signInForm.disable(),this.showAlert=!1;let l=this.signInForm.getRawValue();this._authService.signIn(l).subscribe(()=>{let a=this._authService.getRole(),n=de[a]||this._activatedRoute.snapshot.queryParamMap.get("redirectURL")||"/signed-in-redirect";this._router.navigateByUrl(n)},a=>{this.signInForm.enable(),this.alert={type:"error",message:a.error.errorMenssages[0]},this.showAlert=!0})}};r.\u0275fac=function(a){return new(a||r)(u(N),u(W),u(te),u(T))},r.\u0275cmp=b({type:r,selectors:[["auth-sign-in"]],viewQuery:function(a,n){if(a&1&&A(pe,5),a&2){let m;E(m=k())&&(n.signInNgForm=m.first)}},standalone:!0,features:[V],decls:50,vars:13,consts:[["signInNgForm","ngForm"],["passwordField",""],[1,"flex","min-w-0","flex-auto","flex-col","items-center","sm:flex-row","sm:justify-center","md:items-start","md:justify-start"],[1,"w-full","px-4","py-8","sm:bg-card","sm:w-auto","sm:rounded-2xl","sm:p-12","sm:shadow","md:flex","md:h-full","md:w-1/2","md:items-center","md:justify-end","md:rounded-none","md:p-16","md:shadow-none"],[1,"mx-auto","w-full","max-w-80","sm:mx-0","sm:w-80"],[1,"w-4/5"],["src","images/logo/logo-azul.svg"],[1,"mt-8","text-4xl","font-extrabold","leading-tight","tracking-tight"],[1,"mt-8",3,"appearance","showIcon","type"],[1,"mt-8",3,"formGroup"],[1,"w-full"],["id","correo","matInput","",3,"formControlName"],["id","contrasena","matInput","","type","password",3,"formControlName"],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"inline-flex","w-full","items-center","justify-between"],[1,"text-md","font-medium","text-primary-500","hover:underline",3,"routerLink"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","w-full","bg-crediblue-50","text-white","font-semibold","rounded-lg",3,"click","disabled"],[3,"diameter","mode"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","w-full","bg-crediorange-100","text-white","font-semibold","rounded-lg",3,"click"],[1,"relative","hidden","h-full","w-1/2","flex-auto","items-center","justify-center","overflow-hidden","bg-gray-800","p-16","dark:border-l","md:flex","lg:px-28"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["viewBox","0 0 220 192","width","220","height","192","fill","none",1,"absolute","-top-16","-right-16","text-gray-700"],["id","837c3e70-6c3a-44e6-8854-cc48c737b659","x","0","y","0","width","20","height","20","patternUnits","userSpaceOnUse"],["x","0","y","0","width","4","height","4","fill","currentColor"],["width","220","height","192","fill","url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"],[1,"relative","z-10","w-full","max-w-2xl"],[1,"text-7xl","font-bold","leading-none","text-gray-100"],[1,"mt-6","text-lg","leading-6","tracking-tight","text-gray-400"]],template:function(a,n){if(a&1){let m=F();i(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),c(4,"img",6),t(),i(5,"div",7),s(6," Inicio de sesi\xF3n "),t(),f(7,fe,2,5,"fuse-alert",8),i(8,"form",9,0)(10,"mat-form-field",10)(11,"mat-label"),s(12,"Correo electronico"),t(),c(13,"input",11),f(14,ge,2,0,"mat-error")(15,he,2,0,"mat-error"),t(),i(16,"mat-form-field",10)(17,"mat-label"),s(18,"Contrase\xF1a"),t(),c(19,"input",12,1),i(21,"button",13),w("click",function(){g(m);let y=I(20);return h(y.type==="password"?y.type="text":y.type="password")}),f(22,we,1,1,"mat-icon",14)(23,ve,1,1,"mat-icon",14),t(),i(24,"mat-error"),s(25," Contrase\xF1a es invalida! "),t()(),i(26,"div",15)(27,"a",16),s(28,"Recuperar usuario? "),t()(),i(29,"button",17),w("click",function(){return g(m),h(n.signIn())}),f(30,xe,2,0,"span")(31,ye,1,2,"mat-progress-spinner",18),t()(),i(32,"button",19),w("click",function(){return g(m),h(n.installApp())}),s(33," Instalar App "),t()()(),i(34,"div",20),S(),i(35,"svg",21)(36,"g",22),c(37,"circle",23)(38,"circle",24),t()(),i(39,"svg",25)(40,"defs")(41,"pattern",26),c(42,"rect",27),t()(),c(43,"rect",28),t(),C(),i(44,"div",29)(45,"div",30)(46,"div"),s(47,"Bienvenido a CrediPlus"),t()(),i(48,"div",31),s(49," Plataforma para gestionar pr\xE9stamos a colaboradores de manera eficiente y segura. Inicia Sesi\xF3n y accede las opciones que tenemos para ti. "),t()()()()}if(a&2){let m=I(20);o(7),p(n.showAlert?7:-1),o(),d("formGroup",n.signInForm),o(5),d("formControlName","correo"),o(),p(n.signInForm.get("correo").hasError("required")?14:-1),o(),p(n.signInForm.get("correo").hasError("correo")?15:-1),o(4),d("formControlName","contrasena"),o(3),p(m.type==="password"?22:-1),o(),p(m.type==="text"?23:-1),o(4),d("routerLink",B(12,ue)),o(2),d("disabled",n.signInForm.disabled),o(),p(n.signInForm.disabled?-1:30),o(),p(n.signInForm.disabled?31:-1)}},dependencies:[P,me,ie,Z,J,K,X,ne,$,ee,U,D,j,L,q,re,oe,Q,G,z,H,O,ae,le,se],encapsulation:2,data:{animation:Y}});let e=r;return e})();var Qe=[{path:"",component:ce}];export{Qe as default};
